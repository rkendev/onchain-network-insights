name: CI / Python

on:
push:
branches: [ main ]
pull_request:
branches: [ main ]

jobs:
test:
runs-on: ubuntu-latest
strategy:
matrix:
python-version: [3.10, 3.11, 3.12]
steps:
- name: Checkout code
uses: actions/checkout@v5

yaml
Copy code
  - name: Set up Python
    uses: actions/setup-python@v5
    with:
      python-version: \${{ matrix.python-version }}

  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install -r requirements.txt
      pip install pytest pytest-cov

  - name: Run tests
    run: |
      pytest --cov=ingestion --cov-report=xml --cov-report=html

  - name: Upload coverage report
    uses: actions/upload-artifact@v3
    with:
      name: coverage-report
      path: htmlcov/
lint:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v5
- name: Set up Python
uses: actions/setup-python@v5
with:
python-version: "3.12"
- name: Install flake8
run: pip install flake8
- name: Run flake8
run: flake8 .
